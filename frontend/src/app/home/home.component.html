<div class="container-fluid">
  <div class="jumbotron">
    <h1>
      <i class="fa fa-home"></i>
      <span translate>Find houses near your work place</span>
    </h1>

    <div class="form-group">
      <div class="row">
        <div class="col-md-6">
          <label class="form-row">
            <span translate>Location</span>
            <input type="text" [(ngModel)]="workLocation" [ngModelOptions]="{standalone: true}"
                   class="form-control locationInput" required/>
            <!--(change)=getSuggestions() -->
          </label>
        </div>
        <div class="col-md-6">
          <label class="form-row">
            <span translate>Maximum travel time (minutes)</span>
            <input type="number" [(ngModel)]="maxDuration" class="form-control durationInput" required/>
          </label>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <label class="form-row">
            <span translate>Housing type</span>
            <select [(ngModel)]="housingType"
                   class="form-control housingType" required>
                    <option value="HOUSE,APARTMENT" selected>House or appartment</option>
                   <option value="APARTMENT">Apartment</option>
                   <option value="HOUSE">House</option>
            </select>
          </label>
        </div>
        <div class="col-md-6">
          <label class="form-row">
            <span translate>Maximum price</span>
            <input type="number" [(ngModel)]="maxPrice" class="form-control durationInput"/>
          </label>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <label class="form-row">
            <span translate>Rent or buy</span>
            <select [(ngModel)]="rentOrBuy"
                   class="form-control rentOrBuy" required>
                    <option value="FOR_SALE" selected>Buy</option>
                   <option value="FOR_RENT">Rent</option>
            </select>
          </label>
        </div>
        <div class="col-md-6">
          <label class="form-row">
            <span translate>Minimum number of bedrooms</span>
            <input type="number" [(ngModel)]="minBedroom" class="form-control minBedroom"/>
          </label>
        </div>
      </div>
      <button class="btn btn-primary" type="submit" (click)="search()">
        <span translate>Search</span>
      </button>
    </div>

    <agm-map *ngIf="houses.length > 0" style="height: 300px" [latitude]="51.673858" [longitude]="7.815982">
      <agm-marker *ngFor="let house of houses" [latitude]=house.GeoPoint.latitude [longitude]=house.GeoPoint.longitude>
        <agm-snazzy-info-window [maxWidth]="200" [closeWhenOthersOpen]="true">
          <ng-template>
            {{house.Price}}
          </ng-template>
        </agm-snazzy-info-window>
      </agm-marker>
    </agm-map>

    <h4 *ngIf="houses.length > 0">Results</h4>
    <div class="card" *ngFor="let house of houses">
      <div class="row">
        <div class="col-md-4">
          <img class="houseImage" src="{{house.Image}}"/>
        </div>
        <div class="col-md-8">
          <div class="row">
            <div class="col-md-9">
              <p class="houseType">{{house.Type}}</p>
              <p class="houseDetails">{{house.City}} ({{house.PostalCode}}), {{house.Bedrooms}} bedrooms</p>
            </div>
            <div class="col-md-3 text-right">
              <p class="houseDuration{{getDurationCategory(house.Duration)}}">{{getDurationString(house.Duration)}}</p>
              <p class="housePrice"><i class="fa fa-euro-sign"></i> {{getPriceString(house.Price)}}</p>
            </div>
          </div>
          <p class="houseInfo text-justify">{{house.Info}}</p>
        </div>
      </div>
    </div>
  </div>
</div>
